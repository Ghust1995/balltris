-- Misc
TITLE = 'BallTris'

-- Online things
USERNAME_PATTERN = '^[a-zA-Z0-9]*$'
USERNAME_MAX_LENGTH  = 10
USERNAME_MIN_LENGTH  = 3

-- Physics
METER = 256
GRAVITY = 10 * METER * 2
FIXED_DT = 1/120
MAX_DT_ACC = 1

-- Screen
BASE_SCREEN_WIDTH = 540
BASE_SCREEN_HEIGHT = 960
ASPECT_RATIO = BASE_SCREEN_WIDTH/BASE_SCREEN_HEIGHT
WIDTH_SCALE = 540/640
HOLE_WIDTH = 0.47 * BASE_SCREEN_WIDTH
HOLE_DEPTH = 0.94 * BASE_SCREEN_HEIGHT
BORDER_THICKNESS = (BASE_SCREEN_WIDTH - HOLE_WIDTH)/2
BOTTOM_THICKNESS = BASE_SCREEN_HEIGHT - HOLE_DEPTH

-- Ball
BALL_COLORS = 5

BALL_BASE_RADIUS = 25 * WIDTH_SCALE * BASE_SCREEN_WIDTH/540
BALL_RADIUS_MULTIPLIERS = {1, 1.7, 2.5}
BALL_MAX_RADIUS = BALL_BASE_RADIUS * BALL_RADIUS_MULTIPLIERS[#BALL_RADIUS_MULTIPLIERS]

BALL_LINES_DISTANCE = 12 * BASE_SCREEN_WIDTH/1080
BALL_LINE_WIDTH_OUT = 4 * BASE_SCREEN_WIDTH/1080
BALL_LINE_WIDTH_IN = 4 * BASE_SCREEN_WIDTH/1080


BALL_STRETCH_NORMALIZER = 1/3000
BALL_STRETCH_FACTOR = 1.08
BALL_TIME_TO_DESTROY = 0.2
BALL_CHANCE_MODIFIER = 0.1
BALL_DRAW_SCALE = 0.99

BALL_NEON_GAP = 0

-- White Ball
WHITE_BALL_SIZE = BALL_BASE_RADIUS * 1.7
WHITE_BALL_BORDER_WIDTH = 5

-- UI
RECTANGLE_BORDER_RADIUS = 5

-- Preview
PREVIEW_SPEED = 200
PREVIEW_PADDING = 0
NUM_BALL_PREVIEWS = 5

-- Time Scales
TIME_SCALE_REGULAR = 1.0
TIME_SCALE_SLOMO = 0.1

-- Minimum value definitions
FRAMES_TO_STATIC = 20
MIN_SPEED = 5
COMBO_MAX_TIMEOUT = 0.7 * TIME_SCALE_REGULAR -- seconds
COMBO_INCREMENT_SCORE = 0.05 * TIME_SCALE_REGULAR-- seconds
COMBO_INCREMENT_DROP = 0.07 * TIME_SCALE_REGULAR -- seconds
COMBO_TIMEOUT_BUFFER = 0.05 * COMBO_MAX_TIMEOUT

-- Collision
COL_MAIN_CATEGORY = 1

--Input
INPUT_SWITCH_BALL = 'c'
INPUT_RELEASE_BALL = 'space'

-- Game End
MIN_DISTANCE_TO_TOP = 2 * BALL_MAX_RADIUS * BALL_DRAW_SCALE

-- Effects
EFFECT_CRT_DISTORTION = {0, 0} -- {0.015, 0.050}
EFFECT_CRT_PIXEL = 3
EFFECT_CRT_OPACITY = 0.5
EFFECT_CRT_FADE = 0.5
EFFECT_CRT_SCAN_HEIGHT = 0.5

-- Game states
STATE_GAME_RUNNING = 1
STATE_GAME_LOST = 2 -- When balls cross the line
STATE_GAME_OVER  = 4 -- When everything ends
STATE_GAME_PAUSED  = 8 -- When game is paused
STATE_GAME_LOADING = 16 -- When game is paused
STATE_GAME_MAINMENU = 32 -- When game in on main menu
STATE_GAME_LEADERBOARD = 64 --when in leaderboard screen
STATE_GAME_USERNAME = 128 --when in user name input screen 
STATE_GAME_OFFLINE_CONFIRMATION = 256 --when asking for confirmation to play offline
STATE_GAME_OPTIONS = 512 --main menu options
STATE_GAME_LEADERBOARD_LOADING = 1024 --when in leaderboard screen loading
STATE_GAME_USERNAME_LOADING = 2048 --when in user name input screen loading

-- Tutorial states
LEARN_AIMBALL = 'aim ball'
LEARN_DROPBALL = 'drop ball'
LEARN_COMBO = 'combo'
LEARN_LOSECOMBO = 'lose combo'
LEARN_CLEARCOMBO = 'clear combo'
LEARN_SLOMO = 'slo mo'
LEARN_SCORE = 'score'
LEARN_WHITEBALLS = 'white balls'
LEARN_SLOMOOPTIONS = 'slmo mo options'
LEARN_COMBOMETERDROP = 'combometer drop'
LEARN_COMBOMETERSCORE = 'combometer score'
LEARN_NEWCOMBOCLEARSAT = 'new combo clearsat'
LEARN_GAMELOSE = 'game lose'

TUTORIALS_TO_LEARN = {
  LEARN_AIMBALL,
  LEARN_DROPBALL,
  LEARN_COMBO,
  LEARN_LOSECOMBO,
  LEARN_CLEARCOMBO,
  LEARN_SLOMO,
  LEARN_SCORE,
  LEARN_WHITEBALLS,
  LEARN_SLOMOOPTIONS,
  LEARN_COMBOMETERDROP,
  LEARN_COMBOMETERSCORE,
  LEARN_NEWCOMBOCLEARSAT,
  LEARN_GAMELOSE
}
-- Tutorial things
TUTORIAL_MIN_TIME = 0.5
TUTORIAL_SCORE_TIMEOUT_AFTERHIT = 0.1 * TIME_SCALE_REGULAR
TUTORIAL_COMBO_TIMEOUT_AFTERHIT = 0.1 * TIME_SCALE_REGULAR
TUTORIAL_CLEAR_TIMEOUT = 0.15 * TIME_SCALE_REGULAR
TUTORIAL_SLOMO_TIMEOUT_AFTERSAFE = 0.04 * TIME_SCALE_REGULAR

-- Layers
LAYER_BACKGROUND = 'background'
LAYER_GAME = 'game'
LAYER_HUD = 'hud'
LAYER_MENUS = 'menus'

GAME_LAYERS = {
  LAYER_BACKGROUND,
  LAYER_GAME,
  LAYER_HUD,
  LAYER_MENUS,
}
-- Events
EVENT_MOVED_PREVIEW = 'previewMoved'
EVENT_RELEASED_PREVIEW = 'previewReleased'
EVENT_PRESSED_SWITCH = 'switchReleased'
EVENT_ON_BALLS_STATIC = 'ballsStatic'
EVENT_SAFE_TO_DROP = 'safeToDrop'
EVENT_BALLS_TOO_HIGH = 'ballsTooHigh'
EVENT_OPEN_MENU = 'ballsTooHigh'
EVENT_COMBO_START = 'combostarted'
EVENT_COMBO_END = 'comboended'
EVENT_SCORED = 'scored'
EVENT_NEW_BALL = 'newball'
EVENT_COMBO_TIMEOUT = 'timeout'
EVENT_NEW_BALL_INGAME = 'newballingame'
EVENT_WHITE_BALLS_HIT = 'whiteballshit'
EVENT_COMBO_CLEARED = 'combocleared'
EVENT_COMBO_NEW_CLEARSAT = 'newclearsatvalue'
EVENT_CLICKED_TUTORIAL = 'clickedtutorial'

-- Options
OPTIONS_SLOMO_DEFAULT = 'default'
OPTIONS_SLOMO_REVERSE = 'reverse'
OPTIONS_SLOMO_ALWAYSON = 'always'


DEFAULT_OPTIONS = {
  slomoType = OPTIONS_SLOMO_DEFAULT,
}
